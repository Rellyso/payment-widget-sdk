# üìö √çndice de Documenta√ß√£o - Widget Cart√£o Simples

Este projeto possui documenta√ß√£o completa e organizada. Use este √≠ndice para encontrar rapidamente o que precisa.

---

## üöÄ Para Come√ßar Rapidamente

### [QUICK-START.md](./QUICK-START.md)

**Comece aqui se voc√™ quer testar o widget em menos de 5 minutos.**

- ‚úÖ Exemplo HTML puro (copiar e colar)
- ‚úÖ Integra√ß√£o React com Vite
- ‚úÖ Integra√ß√£o Vue.js
- ‚úÖ Como testar localmente
- ‚úÖ Debug r√°pido

**Use quando:** Voc√™ quer apenas testar o widget rapidamente ou precisa de um exemplo funcional.

---

## üìñ Para Entender o Projeto

### [README.md](./README.md)

**Documenta√ß√£o principal do projeto.**

- Caracter√≠sticas do widget
- Instala√ß√£o via CDN e npm
- API completa de configura√ß√£o
- Callbacks e eventos
- Seguran√ßa e acessibilidade
- Exemplos de integra√ß√£o
- Troubleshooting

**Use quando:** Voc√™ quer entender como o widget funciona em profundidade ou precisa da refer√™ncia completa da API.

### [GUIA-CRIAR-WIDGET-DO-ZERO.md](./GUIA-CRIAR-WIDGET-DO-ZERO.md) ‚≠ê **NOVO**

**Guia completo para criar um Payment Widget do zero.**

- Introdu√ß√£o e conceitos (SDK vs CDN vs Bootstrap)
- Arquitetura e decis√µes t√©cnicas (por que React, Vite, Shadow DOM)
- Configura√ß√£o inicial do projeto (setup passo a passo)
- Estrutura de build m√∫ltiplo (SDK, CDN, Bootstrap)
- Implementa√ß√£o completa do widget
- Shadow DOM e isolamento de estilos
- Sistema de build com Vite
- Deploy e distribui√ß√£o (NPM, S3, CloudFront)
- Seguran√ßa e boas pr√°ticas
- Testes e valida√ß√£o
- Checklist completo

**Use quando:** Voc√™ quer criar um widget embarc√°vel do zero ou entender profundamente as decis√µes arquiteturais do projeto.

### [CDN-CONFIGURATION.md](./CDN-CONFIGURATION.md) ‚≠ê **NOVO**

**Configura√ß√£o da URL do CDN via vari√°veis de ambiente.**

- Como funciona o sistema de fallback
- Override para desenvolvimento/staging
- Build time replacement com Vite
- Cen√°rios de uso (dev/staging/prod)
- Troubleshooting de problemas de CDN
- Boas pr√°ticas

**Use quando:** Voc√™ precisa usar URLs de CDN diferentes por ambiente ou quer entender como configurar o CDN_BASE_URL.

### [VITE-ENV-VARIABLES.md](./VITE-ENV-VARIABLES.md) ‚≠ê **NOVO**

**Guia completo sobre vari√°veis de ambiente no Vite.**

- Diferen√ßa entre prefixo `VITE_` e sem prefixo
- Quando usar `define` no vite.config.ts
- Como funciona o build-time replacement
- Exemplos pr√°ticos (simples, fallback, sem prefixo)
- Armadilhas comuns e solu√ß√µes
- TypeScript types para vari√°veis de ambiente

**Use quando:** Voc√™ vai adicionar novas vari√°veis de ambiente ou quer entender por que usamos `define` para algumas vari√°veis.

### [TOKENIZACAO.md](./TOKENIZACAO.md) ‚≠ê **NOVO**

**Guia completo de tokeniza√ß√£o de cart√£o de cr√©dito.**

- O que √© tokeniza√ß√£o e por que usar
- 2 arquiteturas: Backend vs API P√∫blica (JavaScript)
- Implementa√ß√£o completa passo a passo
- Servi√ßo de tokeniza√ß√£o com valida√ß√£o Luhn
- Compara√ß√£o das abordagens
- Seguran√ßa do token (expira√ß√£o, uso √∫nico)
- Exemplo completo de integra√ß√£o

**Use quando:** Voc√™ precisa entender como gerar e usar tokens de cart√£o de forma segura, ou quer implementar a tokeniza√ß√£o no widget.

### [PAYMENT-FORM.md](./PAYMENT-FORM.md) ‚≠ê **NOVO**

**Documenta√ß√£o completa do formul√°rio de pagamento (PaymentFormStep).**

- Vis√£o geral do componente
- Funcionalidades (m√°scaras, valida√ß√£o, detec√ß√£o de bandeira)
- Fluxo de tokeniza√ß√£o detalhado com diagrama
- Valida√ß√µes (Luhn, expiry, CVV, nome)
- Estrutura do componente
- Integra√ß√£o com APIs (endpoints, requests, responses)
- Exemplos de uso (b√°sico, backend customizado, m√∫ltiplos comerciantes)
- Seguran√ßa (boas pr√°ticas, o que nunca fazer, checklist)
- Callbacks e eventos
- Performance e m√©tricas
- Acessibilidade (WCAG 2.1 AA)
- N√∫meros de teste
- Troubleshooting
- Roadmap de funcionalidades

**Use quando:** Voc√™ precisa entender como funciona o formul√°rio de pagamento, integrar com APIs de tokeniza√ß√£o/pagamento, ou customizar valida√ß√µes.

### [BOOTSTRAP-EXPLICACAO.md](./BOOTSTRAP-EXPLICACAO.md)

**Explica√ß√£o t√©cnica detalhada do Bootstrap Loader.**

- O que √© e para que serve o bootstrap
- Quando e como √© executado
- Arquitetura de 3 camadas (Bootstrap ‚Üí CDN ‚Üí UI)
- Fluxo de inicializa√ß√£o completo
- Recursos principais (multi-inst√¢ncia, Shadow DOM, lazy loading, white-label)
- API p√∫blica e exemplos de uso
- Ciclo de vida detalhado
- Troubleshooting t√©cnico

**Use quando:** Voc√™ quer entender em profundidade como funciona o carregamento do widget, ou precisa modificar o bootstrap.

---

## üèóÔ∏è Para Deploy e Infraestrutura

### [CLOUDFRONT-SETUP.md](./CLOUDFRONT-SETUP.md) ‚≠ê **NOVO**

**Guia completo de configura√ß√£o do CloudFront (primeira vez).**

- Setup autom√°tico com `setup-cloudfront.sh`
- Setup manual passo a passo
- Configura√ß√£o de OAI (Origin Access Identity)
- Cria√ß√£o de distribui√ß√£o CloudFront
- Pol√≠ticas de cache otimizadas
- Valida√ß√£o e testes
- Estimativas de custo (~$3-5/m√™s)
- Troubleshooting CloudFront

**Use quando:** √â a primeira vez que voc√™ vai fazer deploy em produ√ß√£o e precisa configurar o CloudFront.

### [RESUMO-CLOUDFRONT.md](./RESUMO-CLOUDFRONT.md) ‚≠ê **NOVO**

**Resumo executivo da configura√ß√£o CloudFront.**

- Arquivos criados pelo setup
- Fluxo completo de uso
- Checklist de setup
- Custos detalhados
- Pr√≥ximos passos ap√≥s configura√ß√£o

**Use quando:** Voc√™ acabou de executar o setup do CloudFront e quer entender o que foi criado.

### [DEPLOY-GUIDE.md](./DEPLOY-GUIDE.md)

**Guia pr√°tico de deploy (ap√≥s CloudFront configurado).**

- Pr√©-requisitos
- Deploy completo automatizado
- Deploy manual passo a passo
- Testes em staging
- Checklist de deploy
- Troubleshooting

**Use quando:** CloudFront j√° est√° configurado e voc√™ precisa fazer deploy dos arquivos.

### [AWS-CLI-SETUP.md](./AWS-CLI-SETUP.md) ‚≠ê **NOVO**

**Guia de configura√ß√£o do AWS CLI (macOS + fish) para este projeto.**

- Instala√ß√£o com Homebrew ou instalador oficial
- Perfis nomeados (staging/prod) com Access Key ou SSO
- Vari√°veis de ambiente no fish (AWS_PROFILE, AWS_REGION, AWS_PAGER)
- Policies IAM m√≠nimas para S3 e CloudFront
- Sanity checks (STS, S3, CloudFront)
- Como usar com `deploy.sh` e `setup-cloudfront.sh`
- Troubleshooting de credenciais, permiss√µes e regi√£o

**Use quando:** Voc√™ precisa preparar o ambiente AWS local para fazer deploy.

### [GUIA-DEPLOY-CDN.md](./GUIA-DEPLOY-CDN.md)

**Guia completo e did√°tico explicando toda a infraestrutura.**

- O que foi feito (passo a passo)
- Arquitetura da solu√ß√£o (diagramas)
- Problemas encontrados e solu√ß√µes
- Como fazer deploy (staging e produ√ß√£o)
- Pr√≥ximos passos
- Troubleshooting detalhado

**Use quando:** Voc√™ precisa entender como funciona o deploy para AWS ou quer fazer altera√ß√µes na infraestrutura.

---

## üìù Para Publica√ß√£o no NPM

### [PUBLISHING.md](./PUBLISHING.md)

**Guia original de publica√ß√£o e configura√ß√£o.**

- Publica√ß√£o no npm
- Configura√ß√£o DNS para dom√≠nio customizado
- Setup completo de CloudFront
- Detalhes de certificados SSL
- Configura√ß√µes avan√ßadas

**Use quando:** Voc√™ vai publicar uma nova vers√£o no npm ou configurar o dom√≠nio customizado `cdn.cartaosimples.com.br`.

---

## üß™ Exemplos Pr√°ticos

### [examples/exemplo-completo.html](./examples/exemplo-completo.html)

**P√°gina HTML interativa e completa para testar todas as funcionalidades.**

- Interface visual moderna
- Testes de configura√ß√£o customizada
- Console de logs em tempo real
- Demonstra√ß√£o de controle program√°tico
- Painel de configura√ß√£o

**Use quando:** Voc√™ quer ver o widget em a√ß√£o ou testar diferentes configura√ß√µes.

### [examples/cloudfront-test.html](./examples/cloudfront-test.html)

**P√°gina para testar se os arquivos CDN est√£o acess√≠veis.**

- Testa bootstrap, bundle CDN e CSS
- Mostra status HTTP e tamanhos
- Indicadores visuais de sucesso/erro

**Use quando:** Voc√™ acabou de fazer deploy e quer confirmar que os arquivos est√£o acess√≠veis via CloudFront.

---

## ÔøΩ Seguran√ßa

### [SEGURANCA-E-SECRETS.md](./SEGURANCA-E-SECRETS.md) ‚≠ê **NOVO**

**Guia completo de seguran√ßa e gerenciamento de secrets.**

- Regra de ouro: nunca expor secrets no frontend
- Arquitetura segura (Widget ‚Üí Backend ‚Üí API)
- O que PODE e o que NUNCA pode ficar no frontend
- Implementa√ß√£o correta passo a passo
- Tipos de tokens e keys (public vs secret)
- Camadas de seguran√ßa (HTTPS, CORS, Rate Limiting, etc)
- Checklist de seguran√ßa completo
- O que fazer se API key vazar
- Princ√≠pios de seguran√ßa (menor privil√©gio, defesa em profundidade)

**Use quando:** Voc√™ precisa entender como proteger API keys e secrets, ou quer implementar o fluxo de pagamento de forma segura.

### [examples/security/](../examples/security/)

**Exemplos pr√°ticos de integra√ß√£o segura.**

- `nextjs-integration.tsx` - Integra√ß√£o completa com Next.js
- `express-backend.ts` - Backend seguro com Express
- `merchant-validation.ts` - Sistema de valida√ß√£o de merchants
- Todos com c√≥digo comentado e boas pr√°ticas

**Use quando:** Voc√™ precisa de um exemplo real de implementa√ß√£o segura para copiar e adaptar.

---

## ÔøΩüõ†Ô∏è Arquivos de Configura√ß√£o

### Vite Configs

- **vite.config.cdn.ts** - Build do bundle CDN completo (426 KB)
- **vite.config.bootstrap.ts** - Build do bootstrap leve (4.6 KB)
- **vite.config.sdk.ts** - Build do SDK para npm

### AWS

- **cloudfront.json** - Configura√ß√£o da distribui√ß√£o CloudFront
- **deploy.sh** - Script automatizado de deploy

### Package

- **package.json** - Depend√™ncias e scripts npm

---

## üìä Fluxo de Trabalho Recomendado

### 1Ô∏è‚É£ Primeira vez usando o projeto?

```
QUICK-START.md ‚Üí Testar localmente ‚Üí README.md
```

### 2Ô∏è‚É£ Precisa integrar no seu site?

```
README.md (se√ß√£o "Como Usar") ‚Üí examples/exemplo-completo.html
```

### 3Ô∏è‚É£ Primeira vez fazendo deploy em produ√ß√£o?

```
CLOUDFRONT-SETUP.md ‚Üí setup-cloudfront.sh ‚Üí DEPLOY-GUIDE.md ‚Üí deploy.sh
```

### 4Ô∏è‚É£ Deploy regular (CloudFront j√° configurado)?

```
deploy.sh production ‚Üí examples/cloudfront-test.html
```

### 5Ô∏è‚É£ Deploy em staging?

```
deploy.sh staging ‚Üí examples/test-staging.html
```

### 6Ô∏è‚É£ Vai publicar no npm?

```
PUBLISHING.md ‚Üí npm publish
```

### 7Ô∏è‚É£ Algo deu errado?

```
README.md (Troubleshooting) ‚Üí CLOUDFRONT-SETUP.md (Troubleshooting)
```

---

## üîó Links √öteis

### CDN (Staging)

- Bootstrap: https://d2x7cg3k3on9lk.cloudfront.net/widget-bootstrap.v1.min.js
- Bundle: https://d2x7cg3k3on9lk.cloudfront.net/widget.v1.min.js
- CSS: https://d2x7cg3k3on9lk.cloudfront.net/widget.v1.min.css

### AWS Console

- CloudFront: https://console.aws.amazon.com/cloudfront/v3/home#/distributions/EOLJNTE5PW5O9
- S3 (Produ√ß√£o): https://s3.console.aws.amazon.com/s3/buckets/cartao-simples-widget
- S3 (Staging): https://s3.console.aws.amazon.com/s3/buckets/cartao-simples-widget-staging

---

## üéØ Casos de Uso Espec√≠ficos

### Quero apenas usar o widget no meu site

‚Üí **[QUICK-START.md](./QUICK-START.md)** ‚Üí Copiar exemplo HTML

### Estou criando uma integra√ß√£o React/Vue

‚Üí **[README.md](./README.md)** ‚Üí Se√ß√£o "Uso como SDK npm"

### Quero criar um widget parecido do zero

‚Üí **[GUIA-CRIAR-WIDGET-DO-ZERO.md](./GUIA-CRIAR-WIDGET-DO-ZERO.md)** ‚Üí Guia completo passo a passo ‚≠ê **NOVO**

### Primeira vez fazendo deploy em produ√ß√£o

‚Üí **[CLOUDFRONT-SETUP.md](./CLOUDFRONT-SETUP.md)** ‚Üí Setup autom√°tico

### Preciso entender a arquitetura

‚Üí **[GUIA-DEPLOY-CDN.md](./GUIA-DEPLOY-CDN.md)** ‚Üí Se√ß√£o "Arquitetura da Solu√ß√£o"

### Quero entender como funciona o Bootstrap Loader

‚Üí **[BOOTSTRAP-EXPLICACAO.md](./BOOTSTRAP-EXPLICACAO.md)** ‚Üí Explica√ß√£o completa t√©cnica

### Vou fazer altera√ß√µes no c√≥digo

‚Üí **[README.md](./README.md)** ‚Üí Se√ß√£o "Desenvolvimento Local"

### CloudFront setup falhou

‚Üí **[CLOUDFRONT-SETUP.md](./CLOUDFRONT-SETUP.md)** ‚Üí Se√ß√£o "Troubleshooting"

### Deploy falhou com erro

‚Üí **[DEPLOY-GUIDE.md](./DEPLOY-GUIDE.md)** ‚Üí Se√ß√£o "Troubleshooting"

### Quero configurar dom√≠nio customizado

‚Üí **[PUBLISHING.md](./PUBLISHING.md)** ‚Üí Se√ß√£o "Configura√ß√£o de DNS"

### Erro 404 no CloudFront

‚Üí **[CLOUDFRONT-SETUP.md](./CLOUDFRONT-SETUP.md)** ‚Üí Verificar distribui√ß√£o

### Widget n√£o aparece no site

‚Üí **[README.md](./README.md)** ‚Üí Se√ß√£o "Troubleshooting"

### Quanto vai custar o CloudFront?

‚Üí **[RESUMO-CLOUDFRONT.md](./RESUMO-CLOUDFRONT.md)** ‚Üí Se√ß√£o "Custos Estimados"

---

## üìû Suporte

- **Issues**: https://github.com/Rellyso/payment-widget-poc/issues
- **Email**: dev@cartaosimples.com
- **Documenta√ß√£o**: Todos os arquivos `.md` neste projeto

---

## ‚úÖ Checklist R√°pido

### Antes de usar em produ√ß√£o

**Setup Inicial:**

- [ ] Li o [QUICK-START.md](./QUICK-START.md) e testei localmente
- [ ] Entendi a API completa no [README.md](./README.md)
- [ ] AWS CLI instalado e configurado
- [ ] `jq` instalado (`brew install jq`)

**Configura√ß√£o CloudFront (Primeira Vez):**

- [ ] Executei `./setup-cloudfront.sh production`
- [ ] Verifiquei `cloudfront-setup-report.txt`
- [ ] Anotei Domain Name do CloudFront
- [ ] Aguardei deploy da distribui√ß√£o (15-30 min)

**Deploy e Testes:**

- [ ] Executei `./deploy.sh production`
- [ ] Testei os endpoints com [cloudfront-test.html](./examples/cloudfront-test.html)
- [ ] Testei integra√ß√£o com [exemplo-completo.html](./examples/exemplo-completo.html)
- [ ] Configurei callbacks `onSuccess` e `onError`
- [ ] Testei em diferentes navegadores
- [ ] Testei em mobile
- [ ] Configurei ambiente de staging
- [ ] Documentei minha integra√ß√£o

**P√≥s-Deploy:**

- [ ] Verifiquei console sem erros
- [ ] Modal abre e fecha corretamente
- [ ] Estilos aplicados (Shadow DOM)
- [ ] Commit e push dos arquivos

---

**√öltima atualiza√ß√£o**: Outubro 2025  
**Vers√£o do Widget**: 1.0.0  
**CloudFront Distribution**: EOLJNTE5PW5O9
